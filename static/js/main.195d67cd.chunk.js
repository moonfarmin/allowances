(this["webpackJsonpeth-allowance"]=this["webpackJsonpeth-allowance"]||[]).push([[0],{10:function(e,t){e.exports={"0x120999312896F36047fBcC44AD197b7347F499d6":"MoonSwap","0x78Aa55Ce0b0DC7488d2C38BD92769f4d0C8196Ff":"MoonFarm"}},18:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),s=n(12),o=n.n(s),c=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,31)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),s(e),o(e)}))},i=(n(18),n(1)),u=n.n(i),p=n(3),l=n(4),d=n(13),m=n(20),b="0x095ea7b3",f="ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",y=n(9).ERC20ABI,x=n(5),h=new x.providers.Web3Provider(window.ethereum);function v(e,t){switch(e){case 1285:return"https://blockscout.moonriver.moonbeam.network/api/?module=account&action=txlist&address="+t;default:return""}}function w(e){return j.apply(this,arguments)}function j(){return(j=Object(p.a)(u.a.mark((function e(t){var n,a,r,s,o,c,i,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.get(t);case 3:n=e.sent,a=[],r=JSON.parse(n.text).result,s=Object(d.a)(r);try{for(s.s();!(o=s.n()).done;)(c=o.value).input.includes(b)&&((i={}).contract=x.utils.getAddress(c.to),i.approved=x.utils.getAddress("0x"+c.input.substring(34,74)),(p=c.input.substring(74)).includes(f)?i.allowance="unlimited":(i.allowance="some",i.allowanceUnEdited=p),0!==parseInt(p,16)||(i.allowance="CLEAN",i.allowanceUnEdited=p),a.push(i))}catch(u){s.e(u)}finally{s.f()}return e.abrupt("return",a);case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function k(e){return g.apply(this,arguments)}function g(){return(g=Object(p.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new x.Contract(t,y,h),e.next=4,n.name();case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(0),"0x78Aa55Ce0b0DC7488d2C38BD92769f4d0C8196Ff"!==t){e.next=11;break}return e.abrupt("return","MoonFarm");case 11:return console.error(e.t0),e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function O(){return(O=Object(p.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new x.Contract(t,y,h),e.prev=1,e.next=4,a.ownerOf(n);case 4:return e.sent,e.abrupt("return",!0);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}var _="0x505",N={moonriver:{chainId:_,chainName:"Moonriver",rpcUrls:["https://rpc.moonriver.moonbeam.network"],blockExplorerUrls:["https://blockscout.moonriver.moonbeam.network/"],nativeCurrency:{name:"Moonriver",symbol:"MOVR",decimals:18}}},C=function(){var e=Object(p.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getNetwork();case 2:if(t=e.sent,t.chainId!==_){e.next=8;break}return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(p.a)(u.a.mark((function e(t){var n,a,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=document.querySelector(".error-modal-container"),a=document.querySelector(".error-message"),!h){e.next=19;break}if(e.prev=3,r=h.chainId,(s=N[t]).chainId!==r){e.next=8;break}throw new Error("You are already connected to the ".concat(s.chainName," network"));case 8:return e.next=10,window.ethereum.request({method:"eth_requestAccounts"});case 10:return e.next=12,window.ethereum.request({method:"wallet_addEthereumChain",params:[s]});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),4001!==e.t0.code&&(n.style.display="block",a.innerHTML=e.t0.message);case 17:e.next=21;break;case 19:n.style.display="block",a.innerHTML='It looks like MetaMask hasn\'t been installed. Please <a href="https://metamask.io/download.html" target="_blank" rel="noreferrer noopener">install MetaMask</a> and try again.';case 21:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),A=n(10),E=n.n(A),I=n(7),B=n.n(I),F=n(9),S=n(5),R=n(0);var D=function(e){function t(){var t=e.provider.getSigner(e.account),n=new S.ethers.Contract(e.tx.contract,F.ERC20ABI,t);(function(e,t){return O.apply(this,arguments)})(e.tx.contract,e.tx.allowanceUnEdited).then((function(t){t?n.approve(0,e.tx.allowanceUnEdited).then((function(e){console.log("revoked: "+JSON.stringify(e))})).catch((function(e){console.log(e),console.log("failed: "+JSON.stringify(e))})):n.approve(e.tx.approved,0).then((function(e){console.log("revoked: "+JSON.stringify(e))})).catch((function(e){console.log(e),console.log("failed: "+JSON.stringify(e))}))}))}return Object(R.jsxs)("tr",{className:"bg-white md:hover:bg-gray-100 flex md:table-row flex-row md:flex-row flex-wrap md:flex-no-wrap mb-10 md:mb-0 font-semibold",children:[Object(R.jsxs)("td",{className:"w-full md:w-auto p-3 text-center border border-b block md:table-cell relative md:static",children:[Object(R.jsx)("span",{className:"md:hidden absolute top-0 left-0 bg-pink-600 px-3 py-2 text-xs font-bold uppercase text-white",children:"Contract"}),Object(R.jsx)("a",{href:e.etherscanURL+e.tx.contract,children:e.tx.contractName})]}),Object(R.jsxs)("td",{className:"w-full md:w-auto p-3  border border-b text-center block md:table-cell relative md:static",children:[Object(R.jsx)("span",{className:"md:hidden absolute top-0 left-0 bg-pink-600 px-3 py-2 text-xs font-bold uppercase text-white",children:"Approved"}),Object(R.jsx)("a",{href:e.etherscanURL+e.tx.approved,children:e.tx.approvedName})]}),Object(R.jsxs)("td",{className:"w-full md:w-auto p-3  border border-b text-center block md:table-cell relative md:static",children:[Object(R.jsx)("span",{className:"md:hidden absolute top-0 left-0 bg-pink-600 px-3 py-2 text-xs font-bold uppercase text-white",children:"Allowance"}),e.tx.allowance]}),Object(R.jsxs)("td",{className:"w-full md:w-auto p-3  border border-b text-center block md:table-cell relative md:static",children:[Object(R.jsx)("span",{className:"md:hidden absolute top-0 left-0 bg-pink-600 px-3 py-2 text-xs font-bold uppercase text-white",children:"Actions"}),Object(R.jsx)("button",{className:"\r p-2\r font-bold\r text-white\r rounded\r border-2 border-white\r bg-red-500 hover:bg-red-900\r transition\r duration-500\r ",onClick:function(){t()},name:"revoke",children:"Revoke"})]})]})};n(29);var L=function(e){return Object(R.jsx)("div",{children:Object(R.jsx)("div",{className:"fixed top-0 left-0 z-50 w-screen h-screen flex items-center justify-center",style:{background:"rgba(0, 0, 0, 0.3)"},children:Object(R.jsxs)("div",{className:"bg-white border py-2 px-5 rounded-lg flex items-center flex-col",children:[Object(R.jsxs)("div",{className:"loader-dots block relative w-20 h-5 mt-2",children:[Object(R.jsx)("div",{className:"absolute top-0 mt-1 w-3 h-3 rounded-full bg-pink-600"}),Object(R.jsx)("div",{className:"absolute top-0 mt-1 w-3 h-3 rounded-full bg-pink-600"}),Object(R.jsx)("div",{className:"absolute top-0 mt-1 w-3 h-3 rounded-full bg-pink-600"}),Object(R.jsx)("div",{className:"absolute top-0 mt-1 w-3 h-3 rounded-full bg-pink-600"})]}),Object(R.jsxs)("div",{className:"text-gray-500 text-xs font-light mt-2 text-center",children:[e.message,"..."]})]})})})};var T=function(e){var t,n=Object(a.useState)(!0),r=Object(l.a)(n,2),s=r[0],o=r[1],c=Object(a.useState)("Loading Contracts"),i=Object(l.a)(c,2),d=i[0],m=i[1],b=Object(a.useState)(null),f=Object(l.a)(b,2),y=f[0],x=f[1],h=Object(a.useState)([]),j=Object(l.a)(h,2),g=j[0],O=j[1],_=Object(a.useState)(null),N=Object(l.a)(_,2),C=N[0],M=N[1];if(Object(a.useEffect)((function(){(function(){var t=Object(p.a)(u.a.mark((function t(){var n,a,r,s,c,i,p;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o(!0),n=null,t.prev=2,t.next=5,window.ethereum.request({method:"eth_requestAccounts"});case 5:return a=t.sent,n=a[0],M(a[0]),t.next=10,e.provider.getNetwork();case 10:return r=t.sent,s=r.chainId,x(s),c=v(s,n),m("Getting transactions"),t.next=17,w(c);case 17:i=t.sent,m("Cleaning contracts with null approvals"),i.filter((function(e){return"CLEAN"===e.allowance})).forEach((function(e){i=i.filter((function(t){return!(t.contract===e.contract&&t.approved===e.approved)}))})),m("Getting contract names"),t.t0=u.a.keys(i);case 23:if((t.t1=t.t0()).done){t.next=32;break}return p=t.t1.value,t.next=27,k(i[p].contract);case 27:i[p].contractName=t.sent,i[p].contract in B.a&&(i[p].contractName="[RUG] "+i[p].contractName),i[p].approved in E.a?i[p].approvedName=E.a[i[p].approved]:i[p].approved in B.a?i[p].approvedName="[RUG] "+B.a[i[p].approved]:i[p].approvedName=i[p].approved,t.next=23;break;case 32:O(i),t.next=39;break;case 35:t.prev=35,t.t2=t.catch(2),console.log(t.t2),console.log("There was most definitely an error and I don't know how to display this just yet");case 39:o(!1);case 40:case"end":return t.stop()}}),t,null,[[2,35]])})));return function(){return t.apply(this,arguments)}})()()}),[]),s)return Object(R.jsx)(L,{message:d});if(g.length>0){var A=function(e){switch(e){case 1285:return"https://blockscout.moonriver.moonbeam.network/address/";default:return""}}(y);t=g.map((function(t,n){return Object(R.jsx)(D,{etherscanURL:A,tx:t,web3:e.web3,provider:e.provider,id:t.contract,account:C},n)}))}return Object(R.jsxs)("table",{className:"border-collapse w-5/6 text-gray-800 ",children:[Object(R.jsx)("thead",{children:Object(R.jsxs)("tr",{className:"border-b-2  font-bold text-gray-100 bg-pink-600",children:[Object(R.jsx)("th",{className:"p-3 hidden md:table-cell",children:"Contract"}),Object(R.jsx)("th",{className:"p-3 hidden md:table-cell",children:"Approved Contract"}),Object(R.jsx)("th",{className:"p-3 hidden md:table-cell",children:"Allowance"}),Object(R.jsx)("th",{className:"p-3 hidden md:table-cell",children:"Actions"})]})}),Object(R.jsx)("tbody",{children:t})]})},U=n.p+"static/media/moonswap_new.64254581.png",q=new S.ethers.providers.Web3Provider(window.ethereum);var P=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1];function s(){return(s=Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:return e.next=4,C();case 4:if(!0===e.sent){e.next=8;break}return e.next=8,M("moonriver");case 8:r(!0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(R.jsx)("div",{className:"wrapper h-screen overflow-auto",style:{background:"radial-gradient(circle, rgb(230, 0, 122) 0%, rgb(4, 4, 4) 100%)"},children:Object(R.jsx)("div",{className:"flex items-center justify-center",children:Object(R.jsxs)("div",{className:"mx-2 my-5 text-center",children:[Object(R.jsx)("img",{className:"hover:scale-105 mx-auto\r transform\r transition-all\r duration-500 w-4/12",src:U,alt:"Logo"}),Object(R.jsx)("h1",{className:"text-gray-100 font-extrabold text-4xl xs:text-5xl md:text-6xl justify-center",children:"Moonriver Token Allowances"}),Object(R.jsx)("div",{className:"flex items-center justify-center mt-5",children:n?Object(R.jsx)(T,{provider:q}):Object(R.jsx)("button",{onClick:function(){return s.apply(this,arguments)},className:"\r p-2\r my-5\r font-bold\r text-white\r rounded\r border-2 border-white\r hover:bg-black hover:bg-opacity-5\r shadow-md\r transition\r duration-500\r md:text-xl\r mx-auto\r ",children:"Connect MetaMask"})})]})})})};o.a.render(Object(R.jsx)(r.a.StrictMode,{children:Object(R.jsx)(P,{})}),document.getElementById("root")),c()},7:function(e,t){e.exports={"0xDcb52693a63904E90B3b0195cd9C0506c34F3580":"SAGA","0x8650C1C1b29CBF9bC99950b88b9545eA8e356375":"RiverSwap Token","0x0b65Ad1BF3aF5779B10765Bf9F4BB622d2a76aE6":"RiverSwap Pool","0x9c00688bd3A558F5d265569dBCf71B093aF296B5":"RiverSwap Liquidity Pool","0x1cCAc175E215Ce22CCBBf5CD199DF8f31dd14727":"RiverSwap DEX","0xFFB35Cc14146351cda713A7500EEF4E1D98C26e8":"RiverAPE","0x120FAb8cB56E79573d4A11AF8A5C497ecDCFB211":"MoonBalls"}},9:function(e,t){e.exports={ERC20ABI:[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}],ERC721ABI:[{constant:!0,inputs:[],name:"name",outputs:[{name:"_name",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"getApproved",outputs:[{name:"_approved",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"approve",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"implementsERC721",outputs:[{name:"_implementsERC721",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"_totalSupply",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"transferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{name:"_tokenId",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"ownerOf",outputs:[{name:"_owner",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"tokenMetadata",outputs:[{name:"_infoUrl",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"_balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_owner",type:"address"},{name:"_tokenId",type:"uint256"},{name:"_approvedAddress",type:"address"},{name:"_metadata",type:"string"}],name:"mint",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"_symbol",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"transfer",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"numTokensTotal",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"getOwnerTokens",outputs:[{name:"_tokenIds",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"_to",type:"address"},{indexed:!0,name:"_tokenId",type:"uint256"}],name:"Mint",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!0,name:"_to",type:"address"},{indexed:!1,name:"_tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_owner",type:"address"},{indexed:!0,name:"_approved",type:"address"},{indexed:!1,name:"_tokenId",type:"uint256"}],name:"Approval",type:"event"}]}}},[[30,1,2]]]);
//# sourceMappingURL=main.195d67cd.chunk.js.map