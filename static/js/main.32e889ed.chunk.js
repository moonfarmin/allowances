(this["webpackJsonpeth-allowance"]=this["webpackJsonpeth-allowance"]||[]).push([[0],{180:function(e,t,n){},191:function(e,t){},200:function(e,t){},216:function(e,t){},218:function(e,t){},241:function(e,t){},260:function(e,t){},262:function(e,t){},272:function(e,t){},274:function(e,t){},299:function(e,t){},305:function(e,t){},324:function(e,t){},425:function(e,t,n){},426:function(e,t,n){"use strict";n.r(t);var a=n(9),r=n.n(a),s=n(174),o=n.n(s),c=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,427)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),s(e),o(e)}))},i=(n(180),n(7)),u=n.n(i),p=n(16),l=n(21),d=n(51),m=n.n(d),b=n(175),f=n(51),y=new f(f.givenProvider),x=n(417),h="0x095ea7b3",v="ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",w=n(82),j=w.ERC20ABI,k=w.ERC721ABI;function O(e,t){switch(e){case 1285:return"https://blockscout.moonriver.moonbeam.network/api/?module=account&action=txlist&address="+t;default:return""}}function g(e){return C.apply(this,arguments)}function C(){return(C=Object(p.a)(u.a.mark((function e(t){var n,a,r,s,o,c,i,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.get(t);case 3:n=e.sent,a=[],r=JSON.parse(n.text).result,s=Object(b.a)(r);try{for(s.s();!(o=s.n()).done;)(c=o.value).input.includes(h)&&((i={}).contract=y.utils.toChecksumAddress(c.to),i.approved=y.utils.toChecksumAddress("0x"+c.input.substring(34,74)),(p=c.input.substring(74)).includes(v)?i.allowance="unlimited":(i.allowance="some",i.allowanceUnEdited=p),0!==parseInt(p,16)||(i.allowance="CLEAN",i.allowanceUnEdited=p),a.push(i))}catch(u){s.e(u)}finally{s.f()}return e.abrupt("return",a);case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function _(e){return M.apply(this,arguments)}function M(){return(M=Object(p.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new y.eth.Contract(j,t),e.next=4,n.methods.name().call();case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(0),"0x78Aa55Ce0b0DC7488d2C38BD92769f4d0C8196Ff"!==t){e.next=11;break}return e.abrupt("return","MoonFarm");case 11:return console.error(e.t0),e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function N(){return(N=Object(p.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new y.eth.Contract(k,t),e.prev=1,e.next=4,a.methods.ownerOf(n).call();case 4:return e.sent,e.abrupt("return",!0);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}var A=window.ethereum,E="0x505",I={moonriver:{chainId:E,chainName:"Moonriver",rpcUrls:["https://rpc.moonriver.moonbeam.network"],blockExplorerUrls:["https://blockscout.moonriver.moonbeam.network/"],nativeCurrency:{name:"Moonriver",symbol:"MOVR",decimals:18}}},B=function(){var e=Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.request({method:"eth_chainId"});case 2:if(e.sent!==E){e.next=7;break}return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(p.a)(u.a.mark((function e(t){var n,a,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=document.querySelector(".error-modal-container"),a=document.querySelector(".error-message"),!A){e.next=20;break}if(e.prev=3,r=A.chainId,(s=I[t]).chainId!==r){e.next=8;break}throw new Error("You are already connected to the ".concat(s.chainName," network"));case 8:return console.log(t),e.next=11,A.request({method:"eth_requestAccounts"});case 11:return e.next=13,A.request({method:"wallet_addEthereumChain",params:[s]});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),4001!==e.t0.code&&(n.style.display="block",a.innerHTML=e.t0.message);case 18:e.next=22;break;case 20:n.style.display="block",a.innerHTML='It looks like MetaMask hasn\'t been installed. Please <a href="https://metamask.io/download.html" target="_blank" rel="noreferrer noopener">install MetaMask</a> and try again.';case 22:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}(),S=n(83),R=n.n(S),D=n(53),L=n.n(D),T=(n(84),n(82)),U=n(1);var q=function(e){function t(){var t=new e.web3.eth.Contract(T.ERC20ABI,e.tx.contract);(function(e,t){return N.apply(this,arguments)})(t,e.tx.allowanceUnEdited).then((function(n){n?t.methods.approve(0,e.tx.allowanceUnEdited).send({from:e.account}).then((function(e){console.log("revoked: "+JSON.stringify(e))})).catch((function(e){console.log("failed: "+JSON.stringify(e))})):t.methods.approve(e.tx.approved,0).send({from:e.account}).then((function(e){console.log("revoked: "+JSON.stringify(e))})).catch((function(e){console.log(e),console.log("failed: "+JSON.stringify(e))}))}))}return Object(U.jsxs)("tr",{className:"bg-white md:hover:bg-gray-100 flex md:table-row flex-row md:flex-row flex-wrap md:flex-no-wrap mb-10 md:mb-0 font-semibold",children:[Object(U.jsxs)("td",{className:"w-full md:w-auto p-3 text-center border border-b block md:table-cell relative md:static",children:[Object(U.jsx)("span",{className:"md:hidden absolute top-0 left-0 bg-pink-600 px-3 py-2 text-xs font-bold uppercase text-white",children:"Contract"}),Object(U.jsx)("a",{href:e.etherscanURL+e.tx.contract,children:e.tx.contractName})]}),Object(U.jsxs)("td",{className:"w-full md:w-auto p-3  border border-b text-center block md:table-cell relative md:static",children:[Object(U.jsx)("span",{className:"md:hidden absolute top-0 left-0 bg-pink-600 px-3 py-2 text-xs font-bold uppercase text-white",children:"Approved"}),Object(U.jsx)("a",{href:e.etherscanURL+e.tx.approved,children:e.tx.approvedName})]}),Object(U.jsxs)("td",{className:"w-full md:w-auto p-3  border border-b text-center block md:table-cell relative md:static",children:[Object(U.jsx)("span",{className:"md:hidden absolute top-0 left-0 bg-pink-600 px-3 py-2 text-xs font-bold uppercase text-white",children:"Allowance"}),e.tx.allowance]}),Object(U.jsxs)("td",{className:"w-full md:w-auto p-3  border border-b text-center block md:table-cell relative md:static",children:[Object(U.jsx)("span",{className:"md:hidden absolute top-0 left-0 bg-pink-600 px-3 py-2 text-xs font-bold uppercase text-white",children:"Actions"}),Object(U.jsx)("button",{className:"\r p-2\r font-bold\r text-white\r rounded\r border-2 border-white\r bg-red-500 hover:bg-red-900\r transition\r duration-500\r ",onClick:function(){t()},name:"revoke",children:"Revoke"})]})]})};n(425);var P=function(e){return Object(U.jsx)("div",{children:Object(U.jsx)("div",{className:"fixed top-0 left-0 z-50 w-screen h-screen flex items-center justify-center",style:{background:"rgba(0, 0, 0, 0.3)"},children:Object(U.jsxs)("div",{className:"bg-white border py-2 px-5 rounded-lg flex items-center flex-col",children:[Object(U.jsxs)("div",{className:"loader-dots block relative w-20 h-5 mt-2",children:[Object(U.jsx)("div",{className:"absolute top-0 mt-1 w-3 h-3 rounded-full bg-pink-600"}),Object(U.jsx)("div",{className:"absolute top-0 mt-1 w-3 h-3 rounded-full bg-pink-600"}),Object(U.jsx)("div",{className:"absolute top-0 mt-1 w-3 h-3 rounded-full bg-pink-600"}),Object(U.jsx)("div",{className:"absolute top-0 mt-1 w-3 h-3 rounded-full bg-pink-600"})]}),Object(U.jsxs)("div",{className:"text-gray-500 text-xs font-light mt-2 text-center",children:[e.message,"..."]})]})})})};var J=function(e){var t,n=Object(a.useState)(!0),r=Object(l.a)(n,2),s=r[0],o=r[1],c=Object(a.useState)("Loading Contracts"),i=Object(l.a)(c,2),d=i[0],m=i[1],b=Object(a.useState)(null),f=Object(l.a)(b,2),y=f[0],x=f[1],h=Object(a.useState)([]),v=Object(l.a)(h,2),w=v[0],j=v[1],k=Object(a.useState)(null),C=Object(l.a)(k,2),M=C[0],N=C[1];if(Object(a.useEffect)((function(){(function(){var t=Object(p.a)(u.a.mark((function t(){var n,a,r,s,c,i,p;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o(!0),n=null,t.prev=2,t.prev=3,t.next=6,e.web3.eth.requestAccounts();case 6:a=t.sent,n=a[0],N(a[0]),t.next=17;break;case 11:return t.prev=11,t.t0=t.catch(3),t.next=15,window.ethereum.enable();case 15:r=t.sent,n=r[0];case 17:return t.next=19,e.web3.eth.getChainId();case 19:return s=t.sent,x(s),c=O(s,n),m("Getting transactions"),t.next=25,g(c);case 25:i=t.sent,m("Cleaning contracts with null approvals"),i.filter((function(e){return"CLEAN"===e.allowance})).forEach((function(e){i=i.filter((function(t){return!(t.contract===e.contract&&t.approved===e.approved)}))})),m("Getting contract names"),t.t1=u.a.keys(i);case 31:if((t.t2=t.t1()).done){t.next=40;break}return p=t.t2.value,t.next=35,_(i[p].contract);case 35:i[p].contractName=t.sent,i[p].contract in L.a&&(i[p].contractName="[RUG] "+i[p].contractName),i[p].approved in R.a?i[p].approvedName=R.a[i[p].approved]:i[p].approved in L.a?i[p].approvedName="[RUG] "+L.a[i[p].approved]:i[p].approvedName=i[p].approved,t.next=31;break;case 40:j(i),t.next=46;break;case 43:t.prev=43,t.t3=t.catch(2),console.log("There was most definitely an error and I don't know how to display this just yet");case 46:o(!1);case 47:case"end":return t.stop()}}),t,null,[[2,43],[3,11]])})));return function(){return t.apply(this,arguments)}})()()}),[]),s)return Object(U.jsx)(P,{message:d});if(w.length>0){var A=function(e){switch(e){case 1285:return"https://blockscout.moonriver.moonbeam.network/address/";default:return""}}(y);t=w.map((function(t,n){return Object(U.jsx)(q,{etherscanURL:A,tx:t,web3:e.web3,id:t.contract,account:M},n)}))}return Object(U.jsxs)("table",{className:"border-collapse w-5/6 text-gray-800 ",children:[Object(U.jsx)("thead",{children:Object(U.jsxs)("tr",{className:"border-b-2  font-bold text-gray-100 bg-pink-600",children:[Object(U.jsx)("th",{class:"p-3 hidden md:table-cell",children:"Contract"}),Object(U.jsx)("th",{class:"p-3 hidden md:table-cell",children:"Approved Contract"}),Object(U.jsx)("th",{class:"p-3 hidden md:table-cell",children:"Allowance"}),Object(U.jsx)("th",{class:"p-3 hidden md:table-cell",children:"Actions"})]})}),Object(U.jsx)("tbody",{children:t})]})},G=n.p+"static/media/moonswap_new.64254581.png",H=new m.a(m.a.givenProvider);var z=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1];function s(){return(s=Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.enable();case 2:return e.next=4,B();case 4:if(!0===e.sent){e.next=8;break}return e.next=8,F("moonriver");case 8:r(!0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(U.jsx)("div",{className:"wrapper h-screen overflow-auto",style:{background:"radial-gradient(circle, rgb(230, 0, 122) 0%, rgb(4, 4, 4) 100%)"},children:Object(U.jsx)("div",{className:"flex items-center justify-center",children:Object(U.jsxs)("div",{className:"mx-2 my-5 text-center",children:[Object(U.jsx)("img",{className:"hover:scale-105 mx-auto\r transform\r transition-all\r duration-500 w-4/12",src:G,alt:"Logo"}),Object(U.jsx)("h1",{className:"text-gray-100 font-extrabold text-4xl xs:text-5xl md:text-6xl justify-center",children:"Moonriver Token Allowances"}),Object(U.jsx)("div",{className:"flex items-center justify-center mt-5",children:n?Object(U.jsx)(J,{web3:H}):Object(U.jsx)("button",{onClick:function(){return s.apply(this,arguments)},className:"\r p-2\r my-5\r font-bold\r text-white\r rounded\r border-2 border-white\r hover:bg-black hover:bg-opacity-5\r shadow-md\r transition\r duration-500\r md:text-xl\r mx-auto\r ",children:"Connect MetaMask"})})]})})})};o.a.render(Object(U.jsx)(r.a.StrictMode,{children:Object(U.jsx)(z,{})}),document.getElementById("root")),c()},53:function(e,t){e.exports={"0xDcb52693a63904E90B3b0195cd9C0506c34F3580":"SAGA","0x8650C1C1b29CBF9bC99950b88b9545eA8e356375":"RiverSwap Token","0x0b65Ad1BF3aF5779B10765Bf9F4BB622d2a76aE6":"RiverSwap Pool","0x9c00688bd3A558F5d265569dBCf71B093aF296B5":"RiverSwap Liquidity Pool","0x1cCAc175E215Ce22CCBBf5CD199DF8f31dd14727":"RiverSwap DEX","0xFFB35Cc14146351cda713A7500EEF4E1D98C26e8":"RiverAPE","0x120FAb8cB56E79573d4A11AF8A5C497ecDCFB211":"MoonBalls"}},82:function(e,t){e.exports={ERC20ABI:[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}],ERC721ABI:[{constant:!0,inputs:[],name:"name",outputs:[{name:"_name",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"getApproved",outputs:[{name:"_approved",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"approve",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"implementsERC721",outputs:[{name:"_implementsERC721",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"_totalSupply",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"transferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{name:"_tokenId",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"ownerOf",outputs:[{name:"_owner",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"tokenMetadata",outputs:[{name:"_infoUrl",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"_balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_owner",type:"address"},{name:"_tokenId",type:"uint256"},{name:"_approvedAddress",type:"address"},{name:"_metadata",type:"string"}],name:"mint",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"_symbol",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"transfer",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"numTokensTotal",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"getOwnerTokens",outputs:[{name:"_tokenIds",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"_to",type:"address"},{indexed:!0,name:"_tokenId",type:"uint256"}],name:"Mint",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!0,name:"_to",type:"address"},{indexed:!1,name:"_tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_owner",type:"address"},{indexed:!0,name:"_approved",type:"address"},{indexed:!1,name:"_tokenId",type:"uint256"}],name:"Approval",type:"event"}]}},83:function(e,t){e.exports={"0x120999312896F36047fBcC44AD197b7347F499d6":"MoonSwap","0x78Aa55Ce0b0DC7488d2C38BD92769f4d0C8196Ff":"MoonFarm"}},84:function(e,t){e.exports={compound:"https://app.compound.finance/#",aave:"https://aave.com/",uniswap:"https://swap.moonfarm.in",nest:"https://nestdapp.io/",cofi:"https://cofix.io/",MoonFarm:"https://app.moonfarm.in"}}},[[426,1,2]]]);
//# sourceMappingURL=main.32e889ed.chunk.js.map